
		<!--[if !IE]> -->
		

		<!-- <![endif]-->

		<!--[if IE]>
<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery-1.11.3.min.js"></script>
<![endif]-->
<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap.min.js"></script>

		<!-- page specific plugin scripts -->

		<!--[if lte IE 8]>
		  <script src="<?php echo base_url();?><?php echo get_folder_template();?>js/excanvas.min.js"></script>
		<![endif]-->
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery-ui.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery-ui.custom.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.ui.touch-punch.min.js"></script>
		
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-editable.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/ace-editable.min.js"></script>
		<!-- page specific plugin scripts -->
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.dataTables.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.dataTables.bootstrap.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/dataTables.buttons.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/buttons.flash.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/buttons.html5.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/buttons.print.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/buttons.colVis.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/dataTables.select.min.js"></script>


		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/chosen.jquery.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/spinbox.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-datepicker.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-timepicker.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/moment.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/daterangepicker.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-datetimepicker.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-colorpicker.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.knob.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/autosize.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.inputlimiter.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/jquery.maskedinput.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/bootstrap-tag.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/tinymce/tinymce.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/dataTables.responsive.min.js"></script>
		 
		<!-- toggle -->
		<!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->
		
		<link rel="stylesheet" href="<?php echo base_url();?>asset/table/bootstrap-table.css">
		<script src="<?php echo base_url();?>asset/table/bootstrap-table.js"></script>
		
		
		<!-- Calc -->
		<!--
		<script src="<?php echo base_url();?>asset/calc/jquery.plugin.js"></script>
		<script src="<?php echo base_url();?>asset/calc/jquery.calculator.js"></script>
		-->
	
		<!-- ace scripts -->
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/ace-elements.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>js/ace.min.js"></script>
		<script src="<?php echo base_url();?><?php echo get_folder_template();?>/js/jquery.easypiechart.min.js"></script>
		
	
		<script>
		
		  jQuery(function($) {	

			//==Calculator==//
			// $.calculator.setDefaults({showOn: 'button', buttonImageOnly: true, buttonImage: '<?php echo base_url();?>asset/calc/calculator.png'});		
			// $('.sciCalculator').calculator({layout: $.calculator.scientificLayout});	
			
			// $('.basicCalculator').calculator({showOn: 'opbutton', buttonImageOnly: true, buttonImage: '<?php echo base_url();?>asset/calc/calculator.png'});
			// $('.basicCalculator').calculator('option', {showFormula: true});

			// $('.basicCalculator').calculator({showOn: 'operator'});				  
		  
			//== Fungsi ComboBox ==//
			if(!ace.vars['touch']) {
				$('.chosen-select').chosen({allow_single_deselect:true}); 
				//resize the chosen on window resize

				$(window)
				.off('resize.chosen')
				.on('resize.chosen', function() {
					$('.chosen-select').each(function() {
						var $this = $(this);
						$this.next().css({'width': $this.parent().width()});
					})
				}).trigger('resize.chosen');
				//resize chosen on sidebar collapse/expand
				$(document).on('settings.ace.chosen', function(e, event_name, event_val) {
					if(event_name != 'sidebar_collapsed') return;
					$('.chosen-select').each(function() {
						var $this = $(this);
						$this.next().css({'width': $this.parent().width()});
					})
				});

				$('#chosen-multiple-style .btn').on('click', function(e){
					var target = $(this).find('input[type=radio]');
					var which = parseInt(target.val());
					if(which == 2) $('#form-field-select-4').addClass('tag-input-style');
					else $('#form-field-select-4').removeClass('tag-input-style');
				});
			}
			//== Fungsi ComboBox ==//
			
			//datepicker plugin
			//link
			$('.date-picker').datepicker({
				autoclose: true,
				todayHighlight: true
			})
			//show datepicker when clicking on the icon
			.next().on(ace.click_event, function(){
				$(this).prev().focus();
			});
			
			$('.date-picker').on('click', function(e) {
			   e.preventDefault();
			   $(this).attr("autocomplete", "off");  
			});
			
			
			//or change it into a date range picker
			$('.input-daterange').datepicker({
				autoclose:true,
				format: 'dd M yyyy'
			});
		
		
			//to translate the daterange picker, please copy the "examples/daterange-fr.js" contents here before initialization
			$('input[name=date-range-picker]').daterangepicker({
				'applyClass' : 'btn-sm btn-success',
				'cancelClass' : 'btn-sm btn-default',
				locale: {
					applyLabel: 'Apply',
					cancelLabel: 'Cancel',
				}
			})
			.prev().on(ace.click_event, function(){
				$(this).next().focus();
			});
		
		
			$('.timepicker').timepicker({
				minuteStep: 1,
				showSeconds: true,
				showMeridian: false,
				disableFocus: true,
				icons: {
					up: 'fa fa-chevron-up',
					down: 'fa fa-chevron-down'
				}
			}).on('focus', function() {
				$('.timepicker').timepicker('showWidget');
			}).next().on(ace.click_event, function(){
				$(this).prev().focus();
			});
			
			
		
			
			if(!ace.vars['old_ie']) $('.date-timepicker').datetimepicker({
			 format: 'DD MMM YYYY HH:mm:ss',//use this option to display seconds
			 icons: {
				time: 'fa fa-clock-o',
				date: 'fa fa-calendar',
				up: 'fa fa-chevron-up',
				down: 'fa fa-chevron-down',
				previous: 'fa fa-chevron-left',
				next: 'fa fa-chevron-right',
				today: 'fa fa-arrows ',
				clear: 'fa fa-trash',
				close: 'fa fa-times'
			 }
			}).next().on(ace.click_event, function(){
				$(this).prev().focus();
			});
			
			
			// $('.numericbox').blur(function () { 
				// // this.value = this.value.replace(/[^0-9\.]/g,'');						
				// this.value = toRp(this.value);
			// });
			
					
		// $('.numericbox').blur(function () { 
			// this.value = this.value.replace(/[^0-9\.]/g,'');
		// });
		
		$('.numericbox').blur(function () {
			// this.value = this.value.replace(/[^0-9\.]/g,'');
			this.value = toRp(this.value, digit_decimal);
		});		
		
	  });
				  
				  
		function toRp(angka, decimal = 0){
			if(angka==""){return 0;}
			var is_minus = 0;
			angka = String(angka);
			// console.log("A: " + angka);
			if(angka<0){
				is_minus = 1;
			}
			angka = angka.replace(/[^0-9\.]/g,'');
			// console.log("B: " + angka);
			var formatter = new Intl.NumberFormat('en-US', {minimumFractionDigits: decimal,});
			sReturn = formatter.format(angka);
			if(is_minus==1){
				// sReturn = "(" + sReturn + ")";
				sReturn = "-" + sReturn + "";
			}
			// console.log("C: " + sReturn);			
			return sReturn;
		}

		function toNumeric(angka){
			if(angka==""){return 0;}
			// alert(angka);
			angka = angka.split(',').join('');
			angka = parseFloat(angka);
			return angka;
		}
		
		function toDate(date) {
			var date = new Date(date);
			var monthNames = ["Jan", "Feb", "Mar",	"Apr", "May", "Jun", "Jul",	"Aug", "Sep", "Oct", "Nov", "Dec"];
			var day = date.getDate();
			var monthIndex = date.getMonth();
			var year = date.getFullYear();
			// alert(day);

			return day + ' ' + monthNames[monthIndex] + ' ' + year;
		}

		jQuery(function($) {
				$('.easy-pie-chart.percentage').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');
					var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';
					var size = parseInt($(this).data('size')) || 50;
					$(this).easyPieChart({
						barColor: barColor,
						trackColor: trackColor,
						scaleColor: false,
						lineCap: 'butt',
						lineWidth: parseInt(size/10),
						animate: ace.vars['old_ie'] ? false : 1000,
						size: size
					});
				})
			
				$('.sparkline').each(function(){
					var $box = $(this).closest('.infobox');
					var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';
					$(this).sparkline('html',
									 {
										tagValuesAttribute:'data-values',
										type: 'bar',
										barColor: barColor ,
										chartRangeMin:$(this).data('min') || 0
									 });
				});
			
			
			  //flot chart resize plugin, somehow manipulates default browser resize event to optimize it!
			  //but sometimes it brings up errors with normal resize event handlers
			  $.resize.throttleWindow = false;
			  <?php
					// $total_jabo = "";
					// $rs_jabo = get_value("SELECT a.* FROM view_area_exp a WHERE a.area1='JABODETABEKSER'");
														
					// $total_jabo = count($rs_jabo);
					// //debug($total_jabo)

					// $total_barat = "";
					// $rs_barat = get_value("SELECT a.* FROM view_area_exp a WHERE a.area1='BARAT'");
														
					// $total_barat = count($rs_barat);

					// $total_tengah = "";
					// $rs_tengah = get_value("SELECT a.* FROM view_area_exp a WHERE a.area1='TENGAH'");
														
					// $total_tengah = count($rs_tengah);

					// $total_timur = "";
					// $rs_timur = get_value("SELECT a.* FROM view_area_exp a WHERE a.area1='TIMUR'");
														
					// $total_timur = count($rs_timur);

					// $total_bali = "";
					// $rs_bali = get_value("SELECT a.* FROM view_area_exp a WHERE a.area1='BALI'");
														
					// $total_bali = count($rs_bali);

					// $total_area = $total_jabo + $total_barat + $total_tengah + $total_timur + $total_bali;

					
					// //PERSENTASE JABO
					// $persen_area = $total_jabo / $total_area * 100;
					// $persen_area_jabo = format_number($persen_area,0);
					// //debug($persen_area_pembulatan);

					// //PERSENTASE BARAT
					// $persen_area = $total_barat / $total_area * 100;
					// $persen_area_barat = format_number($persen_area,0);
					// //debug($persen_area_pembulatan);

					// //PERSENTASE TENGAH
					// $persen_area = $total_tengah / $total_area * 100;
					// $persen_area_tengah = format_number($persen_area,0);
					// //debug($persen_area_pembulatan);\

					// //PERSENTASE TIMUR
					// $persen_area = $total_timur / $total_area * 100;
					// $persen_area_timur = format_number($persen_area,0);
					// //debug($persen_area_pembulatan);
					

					// //PERSENTASE TIMUR
					// $persen_area = $total_bali / $total_area * 100;
					// $persen_area_bali = format_number($persen_area,0);
					// //debug($persen_area_pembulatan);
	


			  ?>

			
			
			  var placeholder = $('#piechart-placeholder').css({'width':'90%' , 'min-height':'200px'});
			  var data = [
				{ label: "Jabodetabekser",  data: 0 <?php //echo $persen_area_jabo ?>, color: "#68BC31"},
				{ label: "Barat",  data: 0 <?php //echo $persen_area_barat ?>, color: "#2091CF"},
				{ label: "Tengah",  data: 0 <?php //echo $persen_area_tengah ?>, color: "#AF4E96"},
				{ label: "Timur",  data: 0 <?php //echo $persen_area_timur ?>, color: "#DA5430"},
				{ label: "Bali",  data: 0 <?php //echo $persen_area_bali ?>, color: "#FEE074"}
				
			  ]
			  function drawPieChart(placeholder, data, position) {
			 	  $.plot(placeholder, data, {
					series: {
						pie: {
							show: true,
							tilt:0.8,
							highlight: {
								opacity: 0.25
							},
							stroke: {
								color: '#fff',
								width: 2
							},
							startAngle: 2
						}
					},
					legend: {
						show: true,
						position: position || "ne", 
						labelBoxBorderColor: null,
						margin:[-30,15]
					}
					,
					grid: {
						hoverable: true,
						clickable: true
					}
				 })
			 }
			 drawPieChart(placeholder, data);
			
			 /**
			 we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
			 so that's not needed actually.
			 */
			 placeholder.data('chart', data);
			 placeholder.data('draw', drawPieChart);
			
			
			  //pie chart tooltip example
			  var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');
			  var previousPoint = null;
			
			  placeholder.on('plothover', function (event, pos, item) {
				if(item) {
					if (previousPoint != item.seriesIndex) {
						previousPoint = item.seriesIndex;
						var tip = item.series['label'] + " : " + item.series['percent'].toFixed(0) +'%';
						$tooltip.show().children(0).text(tip);
					}
					$tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$tooltip.hide();
					previousPoint = null;
				}
				
			 });
			
				/////////////////////////////////////
				$(document).one('ajaxloadstart.page', function(e) {
					$tooltip.remove();
				});


			  //piecart2
			  $.resize.throttleWindow = false;
			  <?php
					// //MODA TRANSPORTATION
					// $total_40ft = "";
					// $rs_40ft = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='TRAILER 40 FEET'");
														
					// $total_40ft = count($rs_40ft);
					// //debug($total_jabo)

					// $total_20ft = "";
					// $rs_20ft = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='TRAILER 20 FEET'");
														
					// $total_20ft = count($rs_20ft);

					// $total_tronton = "";
					// $rs_tronton = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='TRONTON'");
														
					// $total_tronton = count($rs_tronton);

					// $total_fuso = "";
					// $rs_fuso = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='FUSO'");
														
					// $total_fuso = count($rs_fuso);

					// $total_cdd_long = "";
					// $rs_cdd_long = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='CDD (LONG)'");
														
					// $total_cdd_long = count($rs_cdd_long);

					// $total_cdd_6 = "";
					// $rs_cdd_6 = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='CDD 6 RODA'");
														
					// $total_cdd_6 = count($rs_cdd_6);

					// $total_cdd_4 = "";
					// $rs_cdd_4 = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='CDD 4 RODA'");
														
					// $total_cdd_4 = count($rs_cdd_4);

					// $total_minibox = "";
					// $rs_minibox = get_value("SELECT a.* FROM view_total_request_moda a WHERE a.unit='CDD 4 RODA'");
														
					// $total_minibox = count($rs_minibox);

					// $total_moda = $total_40ft + $total_20ft + $total_tronton + $total_fuso + $total_cdd_long + $total_cdd_6 + $total_cdd_4 + $total_minibox;

					
					// //PERSENTASE 40ft
					// $persen_moda = $total_40ft / $total_moda * 100;
					// $persen_moda_40ft = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);

					// //PERSENTASE 20ft
					// $persen_moda = $total_20ft / $total_moda * 100;
					// $persen_moda_20ft = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);

					// //PERSENTASE tronton
					// $persen_moda = $total_tronton / $total_moda * 100;
					// $persen_moda_tronton = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);\

					// //PERSENTASE fuso
					// $persen_moda = $total_fuso / $total_moda * 100;
					// $persen_moda_fuso = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);
					

					// //PERSENTASE cdd_long
					// $persen_moda = $total_cdd_long / $total_moda * 100;
					// $persen_moda_cdd_long = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);

					// //PERSENTASE cdd_6
					// $persen_moda = $total_cdd_6 / $total_moda * 100;
					// $persen_moda_cdd_6 = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);

					// //PERSENTASE cdd_4
					// $persen_moda = $total_cdd_4 / $total_moda * 100;
					// $persen_moda_cdd_4 = format_number($persen_moda,0);
					// //debug($persen_moda_pembulatan);

					// //PERSENTASE total_minibox
					// $persen_moda = $total_minibox / $total_moda * 100;
					// $persen_moda_minibox = format_number($persen_moda,0);
					//debug($persen_moda_pembulatan);
	


			  ?>

			
			
			  var placeholder = $('#piechart2-placeholder2').css({'width':'90%' , 'min-height':'200px'});
			  var data = [
				{ label: "Container 40 FT",  data: 0<?php //echo $persen_moda_40ft ?>, color: "#68BC31"},
				{ label: "Container 20 FT",  data: 0<?php// echo $persen_moda_20ft ?>, color: "#2091CF"},
				{ label: "Tronton",  data: 0<?php //echo $persen_moda_tronton ?>, color: "#AF4E96"},
				{ label: "Fuso",  data: 0<?php// echo $persen_moda_fuso ?>, color: "#DA5430"},
				{ label: "CDD Long",  data: 0<?php //echo $persen_moda_cdd_long ?>, color: "#FEE074"},
				{ label: "CDD 6 Roda",  data: 0<?php //echo $persen_moda_cdd_6 ?>, color: "brown"},
				{ label: "CDE 4 Roda",  data: 0<?php //echo $persen_moda_cdd_4 ?>, color: "#C6699F"},
				{ label: "L300",  data: 0<?php //echo $persen_moda_minibox ?>, color: "black"},
				
			  ]
			  function drawPieChart(placeholder, data, position) {
			 	  $.plot(placeholder, data, {
					series: {
						pie: {
							show: true,
							tilt:0.8,
							highlight: {
								opacity: 0.25
							},
							stroke: {
								color: '#fff',
								width: 2
							},
							startAngle: 2
						}
					},
					legend: {
						show: true,
						position: position || "ne", 
						labelBoxBorderColor: null,
						margin:[-30,15]
					}
					,
					grid: {
						hoverable: true,
						clickable: true
					}
				 })
			 }
			 drawPieChart(placeholder, data);
			
			 /**
			 we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically
			 so that's not needed actually.
			 */
			 placeholder.data('chart', data);
			 placeholder.data('draw', drawPieChart);
			
			
			  //pie chart tooltip example
			  var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');
			  var previousPoint = null;
			
			  placeholder.on('plothover', function (event, pos, item) {
				if(item) {
					if (previousPoint != item.seriesIndex) {
						previousPoint = item.seriesIndex;
						var tip = item.series['label'] + " : " + item.series['percent'].toFixed(0) +'%';
						$tooltip.show().children(0).text(tip);
					}
					$tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});
				} else {
					$tooltip.hide();
					previousPoint = null;
				}
				
			 });
			
				/////////////////////////////////////
				$(document).one('ajaxloadstart.page', function(e) {
					$tooltip.remove();
				});
			
			
			
			
				var d1 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d1.push([i, Math.sin(i)]);
				}
			
				var d2 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.5) {
					d2.push([i, Math.cos(i)]);
				}
			
				var d3 = [];
				for (var i = 0; i < Math.PI * 2; i += 0.2) {
					d3.push([i, Math.tan(i)]);
				}
				
			
				var sales_charts = $('#sales-charts').css({'width':'100%' , 'height':'220px'});
				$.plot("#sales-charts", [
					{ label: "Domains", data: d1 },
					{ label: "Hosting", data: d2 },
					{ label: "Services", data: d3 }
				], {
					hoverable: true,
					shadowSize: 0,
					series: {
						lines: { show: true },
						points: { show: true }
					},
					xaxis: {
						tickLength: 0
					},
					yaxis: {
						ticks: 10,
						min: -2,
						max: 2,
						tickDecimals: 3
					},
					grid: {
						backgroundColor: { colors: [ "#fff", "#fff" ] },
						borderWidth: 1,
						borderColor:'#555'
					}
				});
			
			
				$('#recent-box [data-rel="tooltip"]').tooltip({placement: tooltip_placement});
				function tooltip_placement(context, source) {
					var $source = $(source);
					var $parent = $source.closest('.tab-content')
					var off1 = $parent.offset();
					var w1 = $parent.width();
			
					var off2 = $source.offset();
					//var w2 = $source.width();
			
					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}
			
			
				$('.dialogs,.comments').ace_scroll({
					size: 300
			    });
				
				
				//Android's default browser somehow is confused when tapping on label which will lead to dragging the task
				//so disable dragging when clicking on label
				var agent = navigator.userAgent.toLowerCase();
				if(ace.vars['touch'] && ace.vars['android']) {
				  $('#tasks').on('touchstart', function(e){
					var li = $(e.target).closest('#tasks li');
					if(li.length == 0)return;
					var label = li.find('label.inline').get(0);
					if(label == e.target || $.contains(label, e.target)) e.stopImmediatePropagation() ;
				  });
				}
			
				$('#tasks').sortable({
					opacity:0.8,
					revert:true,
					forceHelperSize:true,
					placeholder: 'draggable-placeholder',
					forcePlaceholderSize:true,
					tolerance:'pointer',
					stop: function( event, ui ) {
						//just for Chrome!!!! so that dropdowns on items don't appear below other items after being moved
						$(ui.item).css('z-index', 'auto');
					}
					}
				);
				$('#tasks').disableSelection();
				$('#tasks input:checkbox').removeAttr('checked').on('click', function(){
					if(this.checked) $(this).closest('li').addClass('selected');
					else $(this).closest('li').removeClass('selected');
				});
			
			
				//show the dropdowns on top or bottom depending on window height and menu position
				$('#task-tab .dropdown-hover').on('mouseenter', function(e) {
					var offset = $(this).offset();
			
					var $w = $(window)
					if (offset.top > $w.scrollTop() + $w.innerHeight() - 100) 
						$(this).addClass('dropup');
					else $(this).removeClass('dropup');
				});
			
			})
				  
		</script>

		
		
		